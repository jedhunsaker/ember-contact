<!doctype html>
<html>
<head>

<title>Contact Path</title>
<link rel='stylesheet' href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,400,300,600,700'>
<link rel="stylesheet" href="/css/normalize.css">
<link rel="stylesheet" href="/css/main.css">

</head>
<body>

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min.js"></script>
<script src="/js/vendor/handlebars-1.0.0-rc.3.js"></script>
<script src="/js/vendor/ember-1.0.0-rc.3.min.js"></script>
<script src="/js/app.js"></script>

<script id="application" type="text/x-handlebars">
  <div id="wrapper">

    <header>
      <div id="logo">
        {{#linkTo "add"}}
          <img src="/img/logo.png" alt="Contact Path">
        {{/linkTo}}
      </div>
    </header>
    <div id="smartSearch">
      {{view Ember.TextField valueBinding="searchCriteria" type="search" id="searchBox" placeholder="Who?"}}
      {{#if shouldShowSearchResults}}
        <ul id="searchResults">
          {{#each contact in searchResults}}
            <li>
              {{#linkTo "view" contact}}
                {{ contact.name }}
              {{/linkTo}}
            </li>
          {{/each}}
        </ul>
      {{else}}
        {{#if shouldShowNotFound}}
          <p>
            A contact named <strong>{{ searchCriteria }}</strong> is not found.
          </p>
        {{/if}}
      {{/if}}
      <div class="clearfix"></div>
    </div>
    <hr/>

    <div id="contactsList" class="listContainer">
      {{#each model.grouped}}
        <dl>
          <dt>{{ name }}</dt>
          {{#each contact in contacts}}
            <dd>
              {{#linkTo "view" contact classNames="cnt"}}
                {{ contact.name }}
              {{/linkTo}}
            </dd>
          {{/each}}
        </dl>
      {{/each}}
    </div>
    <div id="rightViewContainer">
      {{ outlet }}
    </div>
  </div>
</script>

<script id="_contactFields" type="text/x-handlebars">
  <div>
    {{view Ember.TextField valueBinding="model.name" placeholder="Name"}}
    {{#unless isNameValid}}
      <span>
        What good it will do without entering your contact`s name?
      </span>
    {{/unless}}
  </div>
  <div>
    {{view Ember.TextField valueBinding="model.phone" type="tel" placeholder="Phone"}}
    {{#unless isPhoneValid}}
      <span>
        It is supposed to be a number. Right?
      </span>
    {{/unless}}
  </div>
  <div>
    {{view Ember.TextField valueBinding="model.email" type="email" placeholder="Email"}}
    {{#unless isEmailValid}}
      <span>
        From when they started to accept invalid emails?
      </span>
    {{/unless}}
  </div>
</script>

<script id="add" type="text/x-handlebars">
  <form name="myForm" class="formdesign">
    {{partial "contactFields"}}
    <button {{action "addContact" model}} {{bindAttr disabled="isFormInvalid"}}>
      Save
    </button>
  </form>
</script>

<script id="view" type="text/x-handlebars">
  {{#with content}}
    <div class="col1">
      <h2>
        {{ name }}
      </h2>
      <img src="/img/profile_image.png" alt="">
    </div>
    <div class="col2">
      <p class="email">
        {{ email }}
      </p>
      <p class="phone">
        {{ phone }}
      </p>
    </div>
    <hr/>
    <hr/>
    <a class="btn btn-left back" {{action "goBack"}}>
      Go Back
    </a>
  {{/with}}
  {{#linkTo "edit" content classNames="btn"}}
    Edit
  {{/linkTo}}
</script>

<script id="edit" type="text/x-handlebars">
  <form name="myForm" class="formdesign">
    {{partial "contactFields"}}
    <button {{action "editContact" model}} {{bindAttr disabled="isFormInvalid"}} class="btn btn-left">
      Done
    </button>
    <button {{action "deleteContact" model}} class="btn btn-danger">
      Delete
    </button>
    </div>
  </form>
</script>

</body>
</html>
